{% extends "base_generic.html" %}

{% block content %}
    {% if user.is_authenticated and user.user_type == 'Company'%}
      <h1>My Reports</h1>
    {% elif user.user_type == 'Investor' or user.username == 'admin'%}
      <h1>All Reports</h1>
    {% endif %}
    {% if report_list %}

    <ul>

      {% if user.username == "admin" %}

        {% for report in report_list %}
        <li>
          <a href="{{ report.get_absolute_url }}">Name: {{report.report_name}}</a>,
           Company: {{report.company_name}}, 
           Privacy: {{report.privacy_setting}}
           <a href="{{ report.get_edit_url }}">Edit this report</a>,
        </li>
        {% endfor %}
      {% elif user.user_type == 'Investor' %}

        {% for report in report_list %}
        {% if report.privacy_setting == 'Public' %}
        <li>
          <a href="{{ report.get_absolute_url }}">Name: {{report.report_name}}</a>,
           Company: {{report.company_name}},
           Privacy: {{report.privacy_setting}}
        </li>
        {% endif %}
        {% endfor %}
      {% else %}
        <form action="{% url 'my_reports' %}" method="get">

        {% for report in report_list %}
        {% if user.username == report.owner %}
          <li>
            <a href="{{ report.get_absolute_url }}">Name: {{report.report_name}}</a>,
             Company: {{report.company_name}},
             Privacy: {{report.privacy_setting}}
             <a href="{{ report.get_edit_url }}">Edit this report</a>,
        {% endif %}
        {% endfor %}
      {% endif %}
    </ul>

    <h4>
      To edit a report, click on the link at the end of the report preview and change the fields that need to be changed
      For fields that should stay the same, copy and paste the old content back into the form. Report name and privacy
      cannot be updated.
    </h4>

    {% else %}

      <p>There are no reports.</p>
    {% endif %}
    {% if user.user_type == 'Company' %}
      <a href="{% url 'create_report'%}">Create A Report</a>
    {% endif %}
{% endblock %}